<ion-header>
  <ion-toolbar color="dark">
    <ion-title>Realidad Aumentada</ion-title>
  </ion-toolbar>
</ion-header>

<ion-content fullscreen>
  <ng-container *ngIf="!target; else arTpl">
    <ion-text color="medium" class="ion-padding">
      No se recibiÃ³ target. Regresa al listado.
    </ion-text>
  </ng-container>

  <ng-template #arTpl>
    <a-scene
      embedded
      vr-mode-ui="enabled: false"
      arjs="trackingMethod: best; sourceType: webcam; debugUIEnabled: false;"
      style="width:100%;height:100%;"
    >
      <a-marker id="dynamic-marker" type="pattern">
        <a-box color="red" depth="1" height="1" width="1" position="0 0.5 0"></a-box>
      </a-marker>
      <a-entity camera></a-entity>
    </a-scene>

    <ion-footer class="ion-padding" *ngIf="target">
      <div style="display:flex;gap:8px;align-items:center;">
        <ion-button size="small" (click)="saveTarget()" [disabled]="saving">{{ saving ? 'Guardando...' : 'Guardar Target' }}</ion-button>
        <ion-text color="success" *ngIf="saveMessage">{{ saveMessage }}</ion-text>
      </div>
    </ion-footer>
  </ng-template>
</ion-content>
